<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plot Data from Local File</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Upload and Plot Data</h1>

    <!-- File input for the user to select a file -->
    <input type="file" id="fileInput" accept=".csv" />

    <!-- Canvas element where the chart will be rendered -->
    <canvas id="myChart" width="400" height="200"></canvas>

    <script>
        // Listen for the file input change event
        document.getElementById('fileInput').addEventListener('change', function(event) {
            const file = event.target.files[0]; // Get the selected file
            if (file) {
                const reader = new FileReader(); // Create a FileReader to read the file

                // Define what happens when the file is successfully read
                reader.onload = function(e) {
                    const text = e.target.result; // Get the file content as text
                    const data = parseCSV(text); // Parse the CSV data
                    
                    // Extract labels and values from the parsed data
                    const labels = data.map(row => row[0]); // Assuming the first column is for labels
                    const values = data.map(row => parseFloat(row[1])); // Assuming the second column is for values

                    // Call the function to plot the chart with the extracted data
                    plotChart(labels, values);
                };

                // Read the file as text
                reader.readAsText(file);
            }
        });

        // Function to parse CSV data
        function parseCSV(text) {
            const rows = text.split('\n'); // Split the text into rows
            return rows.map(row => row.split(',')); // Split each row into columns (assuming comma-separated values)
        }

        // Function to plot the chart using Chart.js
        function plotChart(labels, values) {
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'bar', // You can change to 'line', 'pie', etc.
                data: {
                    labels: labels, // X-axis labels (e.g., categories or time)
                    datasets: [{
                        label: 'Sample Data',
                        data: values, // Y-axis values (e.g., numerical data)
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
